<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-tw"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="Vue 2.x,Vuex,"><link rel="alternate" href="/atom.xml" title="uNick's Blog" type="application/atom+xml"><meta name="description" content="å¾ˆå¿«çš„å‰ç«¯è©¦ç…‰ä¾†åˆ°äº†ç¬¬äºŒé€±ï¼šfilterï¼Œè©¦è‘—åšå‡ºæœ‰ç¯©é¸åŠŸèƒ½çš„ç¶²é ï¼Œä½†ç¬¬ä¸€é€±å…¶å¯¦é‚„æœ‰å¾ˆå¤šæƒ³ç¹¼çºŒé‘½ç ”çš„åœ°æ–¹ï¼Œåƒæ˜¯é‚„æ²’è§£æ±ºçš„ PWA é›¢ç·šç·©å­˜ã€æ‰‹æ©Ÿä¸Šçš„ tap é¸å–å•é¡Œç­‰ç­‰ï¼Œä¸éæ•´é«”è€Œè¨€ä¸€æ•´å€‹ç¦®æ‹œéƒ½å¾ˆå……å¯¦å‘¢ï¼æœ‰å€‹ç›®æ¨™å¯ä»¥é”æˆï¼Œæ²’æœ‰è¨­è¨ˆåœ¨æ—é‚Šå˜°å˜°å–³å–³ï¼Œå®Œå…¨å°±æ˜¯æ‰“é€ ä¸€å€‹è‡ªå·±æƒ³è¦çš„ä½œå“ï¼ˆæ™šä¸Šéƒ½æ¨ä¸å¾—æ‰“é›»å‹•äº†ï¼‰"><meta name="keywords" content="Vue 2.x,Vuex"><meta property="og:type" content="article"><meta property="og:title" content="ä¿®ç…‰å‰ç«¯ Week 2 - Filter ä¹‹ Youbike"><meta property="og:url" content="http://yoursite.com/2018/06/14/sideproject-filter/index.html"><meta property="og:site_name" content="uNick&#39;s Blog"><meta property="og:description" content="å¾ˆå¿«çš„å‰ç«¯è©¦ç…‰ä¾†åˆ°äº†ç¬¬äºŒé€±ï¼šfilterï¼Œè©¦è‘—åšå‡ºæœ‰ç¯©é¸åŠŸèƒ½çš„ç¶²é ï¼Œä½†ç¬¬ä¸€é€±å…¶å¯¦é‚„æœ‰å¾ˆå¤šæƒ³ç¹¼çºŒé‘½ç ”çš„åœ°æ–¹ï¼Œåƒæ˜¯é‚„æ²’è§£æ±ºçš„ PWA é›¢ç·šç·©å­˜ã€æ‰‹æ©Ÿä¸Šçš„ tap é¸å–å•é¡Œç­‰ç­‰ï¼Œä¸éæ•´é«”è€Œè¨€ä¸€æ•´å€‹ç¦®æ‹œéƒ½å¾ˆå……å¯¦å‘¢ï¼æœ‰å€‹ç›®æ¨™å¯ä»¥é”æˆï¼Œæ²’æœ‰è¨­è¨ˆåœ¨æ—é‚Šå˜°å˜°å–³å–³ï¼Œå®Œå…¨å°±æ˜¯æ‰“é€ ä¸€å€‹è‡ªå·±æƒ³è¦çš„ä½œå“ï¼ˆæ™šä¸Šéƒ½æ¨ä¸å¾—æ‰“é›»å‹•äº†ï¼‰"><meta property="og:locale" content="zh-tw"><meta property="og:image" content="https://i.imgur.com/KykJtVH.jpg"><meta property="og:image" content="https://i.imgur.com/rW12YJ6.png"><meta property="og:image" content="https://i.imgur.com/5lqA4LA.png"><meta property="og:image" content="https://i.imgur.com/vAdjO1D.png"><meta property="og:image" content="http://www.7713.com/static/attachment/upload/image/20180525/1527240845749005.jpg"><meta property="og:image" content="https://farm4.static.flickr.com/3027/3085098011_a712cbb21f_m.jpg"><meta property="og:image" content="https://i.imgur.com/Q98HR4t.png"><meta property="og:updated_time" content="2018-06-21T13:46:26.428Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ä¿®ç…‰å‰ç«¯ Week 2 - Filter ä¹‹ Youbike"><meta name="twitter:description" content="å¾ˆå¿«çš„å‰ç«¯è©¦ç…‰ä¾†åˆ°äº†ç¬¬äºŒé€±ï¼šfilterï¼Œè©¦è‘—åšå‡ºæœ‰ç¯©é¸åŠŸèƒ½çš„ç¶²é ï¼Œä½†ç¬¬ä¸€é€±å…¶å¯¦é‚„æœ‰å¾ˆå¤šæƒ³ç¹¼çºŒé‘½ç ”çš„åœ°æ–¹ï¼Œåƒæ˜¯é‚„æ²’è§£æ±ºçš„ PWA é›¢ç·šç·©å­˜ã€æ‰‹æ©Ÿä¸Šçš„ tap é¸å–å•é¡Œç­‰ç­‰ï¼Œä¸éæ•´é«”è€Œè¨€ä¸€æ•´å€‹ç¦®æ‹œéƒ½å¾ˆå……å¯¦å‘¢ï¼æœ‰å€‹ç›®æ¨™å¯ä»¥é”æˆï¼Œæ²’æœ‰è¨­è¨ˆåœ¨æ—é‚Šå˜°å˜°å–³å–³ï¼Œå®Œå…¨å°±æ˜¯æ‰“é€ ä¸€å€‹è‡ªå·±æƒ³è¦çš„ä½œå“ï¼ˆæ™šä¸Šéƒ½æ¨ä¸å¾—æ‰“é›»å‹•äº†ï¼‰"><meta name="twitter:image" content="https://i.imgur.com/KykJtVH.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.4",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"åšä¸»"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/2018/06/14/sideproject-filter/"><title>ä¿®ç…‰å‰ç«¯ Week 2 - Filter ä¹‹ Youbike | uNick's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-tw"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">uNick's Blog</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">å‰ç«¯èª¤é€£ç¶²</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>é¦–é </a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>æ¨™ç±¤</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>åˆ†é¡</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>æ­¸æª”</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/14/sideproject-filter/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Nick"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="uNick's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">ä¿®ç…‰å‰ç«¯ Week 2 - Filter ä¹‹ Youbike</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">ç™¼è¡¨æ–¼</span> <time title="å‰µå»ºæ–¼" itemprop="dateCreated datePublished" datetime="2018-06-14T14:33:47+08:00">2018-06-14 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†é¡æ–¼</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Side-projects/" itemprop="url" rel="index"><span itemprop="name">Side-projects</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>å¾ˆå¿«çš„å‰ç«¯è©¦ç…‰ä¾†åˆ°äº†ç¬¬äºŒé€±ï¼šfilterï¼Œè©¦è‘—åšå‡ºæœ‰ç¯©é¸åŠŸèƒ½çš„ç¶²é ï¼Œä½†ç¬¬ä¸€é€±å…¶å¯¦é‚„æœ‰å¾ˆå¤šæƒ³ç¹¼çºŒé‘½ç ”çš„åœ°æ–¹ï¼Œåƒæ˜¯é‚„æ²’è§£æ±ºçš„ PWA é›¢ç·šç·©å­˜ã€æ‰‹æ©Ÿä¸Šçš„ tap é¸å–å•é¡Œç­‰ç­‰ï¼Œä¸éæ•´é«”è€Œè¨€ä¸€æ•´å€‹ç¦®æ‹œéƒ½å¾ˆå……å¯¦å‘¢ï¼æœ‰å€‹ç›®æ¨™å¯ä»¥é”æˆï¼Œæ²’æœ‰è¨­è¨ˆåœ¨æ—é‚Šå˜°å˜°å–³å–³ï¼Œå®Œå…¨å°±æ˜¯æ‰“é€ ä¸€å€‹è‡ªå·±æƒ³è¦çš„ä½œå“<small>ï¼ˆæ™šä¸Šéƒ½æ¨ä¸å¾—æ‰“é›»å‹•äº†ï¼‰</small></p><a id="more"></a><p>ç¬¬äºŒé€±ç¤¾åœ˜çµ¦çš„ ref å¤§æ¦‚å°±æ˜¯ä¸€å€‹æ—…éŠä»‹ç´¹çš„ä»‹é¢ï¼Œå·¦é‚Šç¯©é¸æ¬„ä½ï¼Œæœ€ä¸Šæ–¹æœ‰å…¨ç«™æœå°‹çš„ inputï¼Œå†ä¾†å°±æ˜¯ä¸»ç•«é¢çš„æ¸…å–®å‘ˆç¾è·Ÿå…§é æ›´è©³ç´°å…§å®¹<small>(å› ç‚ºé¡Œç›®æ–¹å‘æ˜¯ã€Œç¯©é¸ã€æ‰€ä»¥é€™æ¬¡å°±ä¸è²¼äº†å› ç‚ºå®Œå…¨ä¸ä¸€æ¨£)</small></p><p>èªªåˆ°é–‹æ”¾ api ç¬¬ä¸€å€‹å°±æ˜¯æƒ³åˆ°å°åŒ—å¸‚æ”¿åºœ<small style="text-decoration:line-through;color:grey">(çµæ§‹å¾ˆçˆ›)</small>çš„<a href="http://data.taipei/" target="_blank" rel="noopener">é–‹æ”¾å¹³å°</a>ï¼Œæ‰¾ä¾†æ‰¾å»æ²’æœ‰ä¸€å€‹çˆ­æ°£çš„èƒ½ç”¨ï¼Œå°±ç•¶è¦å¾€åœ‹å¤–ç¶²ç«™æ‰¾æ™‚ï¼Œçªç„¶é–ƒäº†ä¸€ä¸‹ youbike é€™æ±è¥¿ï¼Œé›–ç„¶èªªåˆ°åº•æˆ‘è‡ªå·±æ‡‰è©²ä¹Ÿä¸æœƒæƒ³ç”¨é€™å€‹åŠŸèƒ½ï¼Œä½† â€¦ ç·´ç¿’å˜›ï¼ŒåŠŸèƒ½ç¸½æ˜¯æœ‰äººæœƒéœ€è¦çš„ ğŸ¤¨</p><p>å°±å¤§æ¦‚èŠ±äº†å€‹æ™‚é–“ï¼Œæ´—äº†å€‹æ¾¡ï¼Œæ›äº†å¥—è¡£æœï¼Œç”Ÿå‡ºä¸€å€‹é™½æ˜¥çš„ wireframe<br><img src="https://i.imgur.com/KykJtVH.jpg" alt=""></p><p>ç„¶å¾Œå‘¢å†è·Ÿ CSS äº¤æˆ°æ•¸ç™¾å›å¾Œï¼Œä»‹é¢ç¸½ç®—æ˜¯å¥½äº†<br><small style="text-decoration:line-through;color:grey">åˆ‡ç‰ˆæ¯”å¯«åŠŸèƒ½æ›´è¦å‘½ğŸ™„</small><br><img src="https://i.imgur.com/rW12YJ6.png" alt=""></p><div class="mobile_images"><br><img src="https://i.imgur.com/5lqA4LA.png"><br><img src="https://i.imgur.com/vAdjO1D.png"><br></div><p>æ¥ä¸‹ä¾†å°±é€²å…¥æ­£é¡Œäº†ï¼Œä¸‹é¢ä¾†åˆ†äº«é€™ä¸€è·¯çš„æ³¢æŠ˜ï¼Œä¸€é–‹å§‹é‡åˆ°æœ€é ­ç—›çš„å•é¡Œæ˜¯ â€¦<br><strong style="font-size:25px;color:red">API !!!</strong><br><strong style="font-size:30px;color:red">API !!!</strong><br><strong style="font-size:35px;color:red">API !!!</strong></p><p>ä»–çš„ url ç«Ÿç„¶æ˜¯ <a href="https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.gz" target="_blank" rel="noopener">https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.gz</a> ä¸€å€‹å£“ç¸®æª”ï¼Œè®“æˆ‘ä¸€é–‹å§‹ä¸€ç›´ä»¥ç‚ºæ˜¯ä¸‹è¼‰ä¾†è‡ªå·±ç”¨ï¼Œä½†æƒ³æƒ³ä¹Ÿä¸å°ï¼Œæˆ‘å€‘çš„å‰å“‰æ”¿åºœæœ‰è¾¦æ³•å¹«æˆ‘ä¸‹è¼‰çš„æª”æ¡ˆåšæ›´æ–°ï¼Ÿï¼äºŒè©±ä¸èªªæˆ‘ç›´æ¥ä¸Ÿé€² postman ä¸€æ¢æªç«Ÿï¼Œæœç„¶æ˜¯è¦é€£é€™å€‹ç¶²å€è€Œä¸”é‚„ä¸èƒ½ç”¨ç€è¦½å™¨çœ‹ â€¦</p><p>æ¥è‘—çœ‹åˆ°ä»–çš„çµæ§‹æ˜¯é€™æ¨£<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">   "retCode": 1,</span><br><span class="line">   "retVal": &#123;</span><br><span class="line">     "0001": &#123;</span><br><span class="line">       "sno": "0001",</span><br><span class="line">       "sna": "æ·é‹å¸‚æ”¿åºœç«™(3è™Ÿå‡ºå£)",</span><br><span class="line">       ...</span><br><span class="line">     &#125;,</span><br><span class="line">     ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>OK é€™ç‰©ä»¶åŒ…ç‰©ä»¶çš„çµæ§‹è·Ÿç«åŸº<small style="text-decoration:line-through;color:grey">(firebase)</small>æœ‰ 87% åƒï¼Œé›–ç„¶é€™å° v-for ä¾†èªªä¸æˆå•é¡Œï¼Œä»–é‚„æ˜¯å¯ä»¥æ­£å¸¸åšè¿´åœˆå¾ªç’°ï¼Œ<strong style="color:red">B U T ï¼</strong> æˆ‘å®Œå…¨ä¸èƒ½å°è³‡æ–™åšå¸¸ç”¨çš„é™£åˆ—è™•ç† â€¦ æ‰€ä»¥é€™é‚Š GET å¾Œè¦é¦¬ä¸Šå…ˆåšä¸€å±¤è½‰æ›é™£åˆ—çš„è™•ç†æ‰èƒ½å®‰å¿ƒä¸Šè·¯<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.gz'</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> oriData = res.data.retVal</span><br><span class="line">  <span class="keyword">let</span> dataArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> oriData) &#123;</span><br><span class="line">    dataArr.push(oriData[key])</span><br><span class="line">  &#125;</span><br><span class="line">  commit(<span class="string">'storeApiData'</span>, dataArr);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>è€Œåœ¨ç¬¬ä¸€æ¬¡æ¥è§¸ Vuex å¾Œæˆ‘å°±å†ä¹Ÿé›¢ä¸é–‹å®ƒäº†ï¼Œå¾ˆå¤šè³‡æ–™ç‹€æ…‹ç¾åœ¨éƒ½å–œæ­¡å­˜åœ¨ state è£¡é¢é¿å…ä¸€å †ä¸Šä¸‹å‚³æ‰¿çš„ emit hellï¼Œå› ç‚º Vuex ç”¨åˆ°ç¾åœ¨é‚„æ²’é‡åˆ°å¤ªå¤§çš„å°ˆæ¡ˆï¼Œæ‰€ä»¥å°æ–¼æ‹†åˆ† module å¯èƒ½é‚„æ²’æœ‰ä»€éº¼æ¦‚å¿µï¼Œä¸çŸ¥é“ç›®å‰é€™å€‹åšæ³•æœƒä¸æœƒæœ‰å•é¡Œå°±æ˜¯äº†ã€‚</p><p>é€™é‚Šé‡åˆ°äº†ä¸€å€‹ getter çš„å°éšœç¤™ï¼Œæˆ‘çš„è¨˜æ³•æ˜¯æŠŠå®ƒç•¶æˆ component ä¸­çš„ computed ä¾†æ“ä½œï¼Œå¯æ˜¯ä¸€æ—¦é‡åˆ°åƒ input é€™ç¨®éœ€è¦ v-model çš„æƒ…æ³å°±ä¸èƒ½ç¶åœ¨ getter ä¸Šäº†ï¼Œå› ç‚ºä¸€èˆ¬çš„ computed value æ˜¯å”¯è®€å±¬æ€§ï¼Œå¦‚æœè¦åšå¯«å…¥ä¿®æ”¹çš„è©±å°±è¦åˆ†åˆ¥åš <strong style="color:#00f">setter</strong> &amp; <strong style="color:#00f">getter</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  updateKeyword: &#123;</span><br><span class="line">    get() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.searchKeyword</span><br><span class="line">    &#125;,</span><br><span class="line">    set(newInput) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">'updateKeyword'</span>, newInput)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p></p><p>å‰›å¥½é€™æ¬¡æœ‰æ©Ÿæœƒç¢°åˆ° input ç¯©é¸çš„åŠŸèƒ½ï¼Œæƒ³ä¾†å˜—è©¦çœ‹çœ‹ä¹‹å‰åœ¨<a href="https://ithelp.ithome.com.tw/articles/10192175" target="_blank" rel="noopener">éµäººè³½</a>çœ‹åˆ°ä¸€ä½å‰è¼©åˆ†äº«çš„ listener: <strong><mark>composition</mark></strong><br><img src="http://www.7713.com/static/attachment/upload/image/20180525/1527240845749005.jpg" alt=""></p><p>ç°¡å–®ä¾†èªªï¼Œå›æƒ³ä¸€ä¸‹æˆ‘å€‘åœ¨ç”¨ google search çš„æ™‚å€™ï¼Œåªè¦æ˜¯ä¸­æ–‡è¼¸å…¥æ³•ä»–éƒ½æœƒåœ¨æ‹¼å­—æœŸé–“å°±å‘Šè¨´ä½ ç›¸é—œæŸ¥è©¢çš„å–®å­—ï¼Œé€™å°±æ˜¯ composition çš„åŠŸèƒ½ï¼Œä¸»è¦åˆ‡åˆ†ç‚ºä¸‰å€‹è§¸ç™¼é»</p><ol><li>compositionstart: é–‹å§‹è¼¸å…¥æ™‚</li><li>compositionupdate: æ‹¼å­—æˆ–é¸å­—æœŸé–“</li><li>compositionend: é¸å­—å®Œæˆ</li></ol><p>è©¦äº†ä¸€ä¸‹ vue çœ‹ä»–æœ‰æ²’æœ‰ç¶é€™å€‹ listener çš„ function é‚„çœŸçš„æˆåŠŸäº†ï¼ğŸ‘<br>æ‰€ä»¥å°±æŠŠä¸‰å€‹ listener å…¨éƒ¨éƒ½æ‹¿å»åšæ¯”å°ç¯©é¸<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">input(</span><br><span class="line">  type=&apos;text&apos;, </span><br><span class="line">  v-model=&apos;updateKeyword&apos;,</span><br><span class="line">  ref=&apos;searchInput&apos;,</span><br><span class="line">  @compositionstart=&apos;composition($event)&apos;,</span><br><span class="line">  @compositionupdate=&apos;composition($event)&apos;,</span><br><span class="line">  @compositionend=&apos;composition($event)&apos;)</span><br></pre></td></tr></table></figure><p></p><blockquote><p>composition çš„å›å‚³å€¼æœƒåœ¨ $event.data</p></blockquote><p>è‡³æ–¼æœ€ä¸»è¦çš„ç¯©é¸åŠŸèƒ½ï¼Œæ‹œ<a href="http://titlist.com.tw/" target="_blank" rel="noopener">æ³°å¾·åˆ©</a>çš„ç¦ï¼Œé›–ç„¶ä¸åˆ°çˆç«æ¸…ç´”<small>(?!)</small>ï¼Œä½†å°æ–¼æ•´å€‹åšæ³•é‚„æ˜¯æœ‰æ¦‚å¿µçš„ï¼Œåªè¦ç¨å¾®æ•´ç†å‡ºç¯©é¸é †åºå°±å¯ä»¥åšåˆ°å¤šå±¤ç´šç¯©é¸çš„ç›®çš„<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">filteredData: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> finalData = []</span><br><span class="line">  <span class="comment">// search keyword filter</span></span><br><span class="line">  finalData = state.searchKeyword === <span class="string">''</span> ? state.bikeData : state.bikeData.filter(<span class="function"><span class="params">bike</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> tempStr = <span class="built_in">JSON</span>.stringify(bike)</span><br><span class="line">    <span class="keyword">let</span> regexWords = state.searchKeyword.split(<span class="string">' '</span>).join(<span class="string">'|'</span>)</span><br><span class="line">    <span class="keyword">if</span> (tempStr.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(regexWords, <span class="string">'i'</span>)) !== <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// compute content of each area</span></span><br><span class="line">  state.areaList.forEach(<span class="function"><span class="params">area</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">    finalData.forEach(<span class="function"><span class="params">bike</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (bike.sarea === area.name_zh) count++</span><br><span class="line">    &#125;)</span><br><span class="line">    area.contentLength = count</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// area filters</span></span><br><span class="line">  finalData = store.getters.selectedTags.length === <span class="number">0</span> ? finalData : finalData.filter(<span class="function"><span class="params">bike</span> =&gt;</span>  store.getters.selectedTags.some(<span class="function"><span class="params">tag</span> =&gt;</span> tag.name_zh === bike.sarea))</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// status filters</span></span><br><span class="line">  <span class="comment">// // rentable</span></span><br><span class="line">  finalData = state.rentable ? finalData.filter(<span class="function"><span class="params">bike</span> =&gt;</span> bike.sbi &gt; <span class="number">0</span>) : finalData</span><br><span class="line">  <span class="comment">// // returnable</span></span><br><span class="line">  finalData = state.returnable ? finalData.filter(<span class="function"><span class="params">bike</span> =&gt;</span> bike.bemp &gt; <span class="number">0</span>) : finalData</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// pagination options</span></span><br><span class="line">  state.totalPage = <span class="built_in">Math</span>.ceil(finalData.length / state.pageSize)</span><br><span class="line">  state.totalLength = finalData.length</span><br><span class="line"></span><br><span class="line">  <span class="comment">// pagination</span></span><br><span class="line">  <span class="keyword">let</span> start = (state.currentPage - <span class="number">1</span>) * state.pageSize</span><br><span class="line">  <span class="keyword">let</span> end = start + state.pageSize</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> finalData.slice(start, end)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><img src="https://farm4.static.flickr.com/3027/3085098011_a712cbb21f_m.jpg" alt=""></p><p><big><strong>ç¬¬ä¸€å±¤</strong></big>ç¯©é¸æˆ‘å…ˆè™•ç†æœ€ä¸Šæ–¹ input çš„ keywordï¼Œç”¨ regex æ¯”å°å­—å…ƒå†å›å‚³æ¯”å°å¾Œçš„çµæœï¼Œä½†å…¶å¯¦é€™é‚Šç¯©é¸åšå¾—ä¸å¥½ï¼Œå› ç‚ºé€™å€‹åšæ³•æ˜¯æŠŠç‰©ä»¶çš„ã€Œæ‰€æœ‰ã€è³‡æ–™è½‰æ›æˆå­—ä¸²å¾Œå»æ¯”å°ï¼Œä¹Ÿå°±æ˜¯åŒ…å« key å€¼è·Ÿæœ‰äº›ä¸æœƒåœ¨ç•«é¢ä¸Šå‘ˆç¾çš„ valueï¼Œåœ¨ join(â€˜|â€™) é‚£éƒ¨åˆ†æœ¬ä¾†æ˜¯æƒ³åšåˆ°åƒ search engine ä¸€æ¨£å¯ä»¥ç”¨ç©ºæ ¼ä¾†åšè¤‡æ•¸çš„äº¤å‰æ¯”å°ï¼Œå¯æ˜¯ç¾åœ¨é‚„æ²’æ‰¾åˆ° regex å¯«äº¤é›†çš„æ–¹æ³•æ‰€ä»¥å…ˆç•™è‘—è¯é›† â€¦</p><p><big><strong>ç¬¬äºŒå±¤</strong></big>çš„ finalData å°±æœƒæ˜¯ç¬¬ä¸€å±¤çš„ç¯©é¸çµæœï¼Œå°±ç®—æ²’ç¯©é¸ä¹Ÿæ˜¯è¿”å›åŸé™£åˆ—<small style="color:grey">(æ¯å±¤çš†æ˜¯)</small>ï¼Œæ‰€ä»¥å¯ä»¥æ¥è‘—åšè‡ªå·±çš„ç¯©é¸æ¢ä»¶ï¼Œé€™é‚Šæ˜¯è² è²¬è¨ˆç®—æ¯å€‹è¡Œæ”¿å€ç¶“éç¬¬ä¸€å±¤çš„ç¯©é¸å¾Œå„æœ‰å¹¾ç­†ï¼Œæœƒæ”¾åœ¨ç¬¬äºŒå€‹çš„åŸå› æ˜¯å› ç‚ºå¦‚æœåœ¨ç¬¬ä¸‰å±¤æˆ–ä»¥ä¸‹æ‰é–‹å§‹ç¯©çš„è©±åªæœƒé¡¯ç¤ºè¢«é»é¸çš„é‚£å€‹è¡Œæ”¿å€æ•¸é‡ï¼Œå…¶ä»–éƒ½æ˜¯ 0</p><p><big><strong>ç¬¬ä¸‰å±¤</strong></big>å‰‡æ˜¯è¡Œæ”¿å€ä¸‹æ–¹çš„ç‹€æ…‹ç¯©é¸ï¼Œä¸»è¦æ˜¯åš å¯å€Ÿè»Šæ•¸ &gt; 0 è·Ÿ å¯æ­¸é‚„æ•¸ &gt; 0</p><p><big><strong>ç¬¬å››å±¤</strong></big>å°±æ˜¯æœ€å¾Œçš„åˆ†é åˆ‡å‰²å•¦ï¼Œé ç¢¼çš„è¨ˆç®—ä¸€å®šä¸€å®šæ˜¯æ”¾åœ¨æœ€å¾Œï¼Œæ‰èƒ½æ­£ç¢ºåœ°ç®—å‡ºå…¨éƒ¨çµæœçš„ç­†æ•¸è©²åˆ†æˆå¹¾é ï¼Œé€™é‚Šæœ¬ä¾†æ˜¯æƒ³è©¦çœ‹çœ‹ç”¨<a href="https://github.com/ElemeFE/vue-infinite-scroll" target="_blank" rel="noopener">infinite-scroll</a>çš„æ–¹å¼ä¾†å‘ˆç¾<small style="text-decoration:line-through;color:grey">(çµ•ä¸æ˜¯å› ç‚ºç®—é æ•¸å¾ˆéº»ç…©åˆå¾ˆæ²’æˆå°±æ„Ÿ)</small>ï¼Œä½†æœ€å¾Œé‚„æ˜¯ä½œç½· â€¦ å…ˆç”¨ä»¥å‰çš„ component é ‚è‘—ï¼Œå†ä¸ç„¶å…¶å¯¦ä¹Ÿå¯ä»¥æ‰¾ç·šä¸Šå¯«å¥½çš„ component ä¾†ç”¨</p><p>å¯«åˆ°é€™èŠ±äº†æ•´æ•´å…©å¤©çš„æ™‚é–“ğŸ˜“ è¶…ç´šç´¯ä½†æˆå°±æ»¿é»rï¼é›¢æˆªç¨¿é‚„æœ‰ä¸€æ®µæ™‚é–“ï¼Œå°±æ‹¿ä¾†å¥—çœ‹çœ‹ google map å¥½äº†ï¼åŸæœ¬æƒ³èªªé€™é‚Šæœƒè€—ä¸Šä¸€æ®µå…‰é™°ï¼Œå¯¦éš›ä¸Šæ¯”é æœŸçš„é‚„å¿«ï¼Œä¸»è¦æ˜¯æ‹œ<a href="https://medium.com/founders-factory/building-a-custom-google-map-component-with-vue-js-d1c01ddd0b0a" target="_blank" rel="noopener">å‰äºº</a>ç¨®çš„é•·é’æ¨¹è·Ÿ<a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank" rel="noopener">å®˜æ–¹æ–‡ä»¶</a>çš„ç¦æ‰èƒ½é †åˆ©å®Œæˆã€‚</p><p><a href="http://vfilter.s3-website-ap-northeast-1.amazonaws.com/" target="_blank" rel="noopener">çœ‹çœ‹æˆå“</a></p><p><img src="https://i.imgur.com/Q98HR4t.png" alt=""></p><p>ä¹‹å¾Œåœ¨æ‰¾æ™‚é–“æ•´ç†ä¸€ä¸‹ Vuex çš„ç´°ç¯€ğŸ™Œ</p><style>.mobile_images{width:100%;height:650px;display:flex}.mobile_images img{width:50%;height:auto}@media (max-width:768px){.mobile_images{flex-direction:column;height:auto}.mobile_images img{width:100%}}</style></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Vue-2-x/" rel="tag"># Vue 2.x</a> <a href="/tags/Vuex/" rel="tag"># Vuex</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/06/07/vscode-node-version/" rel="next" title="VS Code terminal ç‰ˆæœ¬éŒ¯èª¤"><i class="fa fa-chevron-left"></i> VS Code terminal ç‰ˆæœ¬éŒ¯èª¤</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018/06/20/sideproject-dashboard/" rel="prev" title="ä¿®ç…‰å‰ç«¯ Week 3 - Dashboard">ä¿®ç…‰å‰ç«¯ Week 3 - Dashboard <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Nick</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">æ–‡ç« </span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">åˆ†é¡</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">15</span> <span class="site-state-item-name">æ¨™ç±¤</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Nick</span></div><div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼·åŠ›é©…å‹•</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html>